# Разработка приложения «Geo & Sensors App» на Flutter

## 1. Цель работы

Целью данной практической работы было изучение возможностей взаимодействия с аппаратной частью мобильных устройств через Flutter-приложение. Ключевые задачи:

- Освоить получение координат устройства с помощью геолокации.
- Научиться работать с данными различных датчиков: акселерометра, гироскопа и компаса.
- Разработать приложение, которое в реальном времени отображает геолокационные данные и показания датчиков.
## 2. Используемые пакеты (зависимости)

Для реализации функциональности в проект были добавлены следующие пакеты:

| Пакет | Версия | Назначение |
| :--- | :---: | :--- |
| **geolocator** | ^10.1.0 | Определение координат устройства |
| **geocoding** | ^2.1.1 | Преобразование координат в адрес |
| **sensors_plus** | ^7.0.0 | Данные акселерометра и гироскопа |
| **flutter_compass** | ^0.8.1 | Получение направления компаса |
| **permission_handler** | ^11.1.0 | Управление разрешениями |
## 3. Основные фрагменты кода и реализация

### 3.1. Структура приложения
Приложение построено по классической для Flutter схеме: главный виджет GeoSensorsApp содержит состояние GeoSensorsPage, в котором управляются все данные.

### 3.2. Работа с геолокацией

Запрос разрешений: Перед определением местоположения проверяется доступность сервисов геолокации (Geolocator.isLocationServiceEnabled()) и запрашиваются разрешения у пользователя (Geolocator.requestPermission()).
Получение координат: При положительном результате вызывается Geolocator.getCurrentPosition() с высокой точностью.
Обратное геокодирование: Полученные координаты передаются в функцию placemarkFromCoordinates() из пакета geocoding для получения читаемого адреса.
dart
Future<void> _getLocation() async {
  // ... проверка сервисов и разрешений
  final pos = await Geolocator.getCurrentPosition(
    desiredAccuracy: LocationAccuracy.high,
  );
  List<Placemark> placemarks = await placemarkFromCoordinates(
    pos.latitude,
    pos.longitude,
  );
  // ... обновление состояния
}
### 3.3. Работа с датчиками
В методе initState() осуществлена подписка на потоки (Stream) данных от датчиков:

accelerometerEvents.listen() — обновляет значения ускорения по осям X, Y, Z.
gyroscopeEvents.listen() — обновляет значения угловой скорости.
FlutterCompass.events.listen() — обновляет значение азимута (направления).
dart
@override
void initState() {
  super.initState();
  accelerometerEvents.listen((event) {
    setState(() => _accelerometerValues = [event.x, event.y, event.z]);
  });
  // ... аналогичные подписки для гироскопа и компаса
}
### 3.4. Пользовательский интерфейс
Интерфейс реализован с помощью Scaffold, Card и ListView. Данные выводятся в виде отдельных карточек для каждого типа информации (геолокация, компас, акселерометр, гироскоп), что обеспечивает четкую визуальную структуру. Для отображения направления компаса используется анимированная стрелка (Transform.rotate).

## 4. Результаты и выводы
<img width="330" height="645" alt="Снимок экрана 2025-12-14 в 20 22 27" src="https://github.com/user-attachments/assets/86ddd9c3-f7db-4866-a6e5-37361849efcc" />
<img width="310" height="645" alt="Снимок экрана 2025-12-14 в 20 22 32" src="https://github.com/user-attachments/assets/e4f29bdb-a04e-44e7-873f-28242a75ef9b" />
<img width="333" height="651" alt="Снимок экрана 2025-12-14 в 20 23 50" src="https://github.com/user-attachments/assets/a96e47d1-7b40-4c39-b309-93c46de6b44c" />
<img width="327" height="661" alt="Снимок экрана 2025-12-14 в 20 23 57" src="https://github.com/user-attachments/assets/130c3958-f5c7-42fb-b1c1-e202f82c07a2" />

### 4.1. Ключевые проблемы и ограничения, выявленные при тестировании
Все поставленные задачи были выполнены, однако важнейшим выводом работы стало понимание фундаментальной разницы между тестированием на эмуляторе и на реальном устройстве:

| Компонент | Эмулятор | Реальное устройство | Примечания |
| :--- | :---: | :---: | :--- |
| **Геолокация** | ⚠️ Требует ручную настройку | ✅ Работает автоматически | Координаты задаются в панели эмулятора |
| **Акселерометр** | ⚠️ Данные вручную | ✅ Реакция на движение | Ноутбуки не имеют этого датчика |
| **Компас** | ⚠️ Heading вручную | ✅ Определяет север | Магнитометр отсутствует в ПК |
| **Геокодирование** | ✅ Работает | ✅ Работает | Преобразует любые координаты в адрес |
### 4.2. Общий вывод
В ходе работы было успешно разработано кроссплатформенное приложение, интегрирующее ключевые аппаратные возможности мобильных устройств. Освоены принципы асинхронного запроса разрешений, работы с геолокационными сервисами и потоковыми данными датчиков. Получен важный практический опыт, объясняющий, почему результаты модуля, зависящего от "железа", могут отличаться при запуске на разных типах устройств.

При тестировании в эмуляторе используйте панель Extended Controls для симуляции данных датчиков и геолокации.
