1. Цель работы
Целью данной практической работы было изучение возможностей взаимодействия с аппаратной частью мобильных устройств через Flutter-приложение. Ключевые задачи:

Освоить получение координат устройства с помощью геолокации.

Научиться определять местоположение, направление и движение.

Изучить работу с сенсорами: акселерометр, гироскоп, компас.

Разработать мобильное приложение, которое в реальном времени отображает геолокационные данные и показания датчиков.

2. Ход выполнения
2.1. Используемые пакеты (зависимости)
Для реализации функциональности в проект были добавлены следующие пакеты:

Пакет	Версия	Назначение
geolocator	^12.0.0	Определение координат, скорости и направления устройства
geocoding	^3.0.0	Преобразование координат в читаемый адрес
sensors_plus	^4.0.3	Получение потоков данных акселерометра и гироскопа
flutter_compass	^0.7.0	Получение направления на север (азимута)
permission_handler	^11.3.0	Управление разрешениями на доступ к данным
2.2. Основные фрагменты кода и реализация
Структура приложения: Приложение построено по классической для Flutter схеме. Главный виджет GeoSensorsApp запускает состояние GeoSensorsPage, в котором централизованно управляются все данные и потоки.

Работа с геолокацией:

Запрос разрешений: Перед определением местоположения выполняется проверка доступности сервисов геолокации (Geolocator.isLocationServiceEnabled()) и запрос разрешений у пользователя (Geolocator.requestPermission()).

Получение координат: При положительном результате вызывается Geolocator.getCurrentPosition() с высокой точностью (LocationAccuracy.high).

Обратное геокодирование: Полученные координаты передаются в функцию placemarkFromCoordinates() из пакета geocoding для получения читаемого адреса.

dart
Future<void> _getLocation() async {
  bool serviceEnabled = await Geolocator.isLocationServiceEnabled();
  if (!serviceEnabled) {
    // Обработка отключенного сервиса...
    return;
  }

  LocationPermission permission = await Geolocator.requestPermission();
  if (permission == LocationPermission.denied) {
    // Обработка отказа в разрешении...
    return;
  }

  final pos = await Geolocator.getCurrentPosition(
    desiredAccuracy: LocationAccuracy.high,
  );

  List<Placemark> placemarks = await placemarkFromCoordinates(
    pos.latitude,
    pos.longitude,
  );

  setState(() {
    _position = pos;
    _address = '${placemarks.first.locality}, ${placemarks.first.street}';
  });
}
Работа с датчиками: В методе initState() осуществляется подписка на потоки (Stream) данных от датчиков:

accelerometerEvents.listen() — обновляет значения ускорения по осям X, Y, Z.

gyroscopeEvents.listen() — обновляет значения угловой скорости.

FlutterCompass.events!.listen() — обновляет значение азимута (направления на север).

dart
@override
void initState() {
  super.initState();
  accelerometerEvents.listen((event) {
    setState(() => _accelerometerValues = [event.x, event.y, event.z]);
  });
  gyroscopeEvents.listen((event) {
    setState(() => _gyroscopeValues = [event.x, event.y, event.z]);
  });
  FlutterCompass.events!.listen((event) {
    setState(() => _compass = event.heading);
  });
}
Пользовательский интерфейс: Интерфейс реализован с помощью Scaffold и ListView. Данные выводятся в виде текстовых блоков и отдельного вращающегося индикатора для компаса (Transform.rotate), что обеспечивает наглядное отображение данных в реальном времени.

3. Результаты
В результате работы было создано кроссплатформенное приложение, успешно интегрирующее данные с геолокации и датчиков устройства. Все контрольные точки были достигнуты:

Контрольная точка	Статус	Комментарий
Приложение запускается без ошибок	✅	Сборка прошла успешно для Android.
Определяются координаты устройства	✅	Координаты получаются через API geolocator.
Отображается адрес через геокодинг	✅	Адрес формируется из Placemark.
Данные акселерометра/гироскопа меняются	✅	Потоки sensors_plus обновляют UI при движении.
Компас показывает направление	✅	Плагин flutter_compass корректно передаёт азимут.
Скриншоты работы приложения:

<img width="710" height="1307" alt="image" src="https://github.com/user-attachments/assets/db252467-e778-46f4-b863-6f50c78c1279" />

<img width="690" height="1094" alt="image" src="https://github.com/user-attachments/assets/e1429ab4-66d0-480a-93ac-5879f89e3988" />

<img width="678" height="1115" alt="image" src="https://github.com/user-attachments/assets/9e8d0856-6690-4562-965e-7be75e2b2d0a" />


4. Вывод
В ходе работы было успешно разработано приложение, демонстрирующее интеграцию ключевых аппаратных возможностей мобильного устройства в кроссплатформенном проекте на Flutter. Были освоены принципы асинхронного запроса разрешений, работы с геолокационными сервисами и потоковыми данными датчиков. Основным практическим выводом стало понимание фундаментальной разницы между тестированием в эмуляторе и на реальном устройстве, что отражено в таблице ниже.

Компонент	Результат на эмуляторе	Результат на реальном устройстве	Ключевое ограничение
Геолокация	Требует ручную настройку координат	Работает автоматически	Эмулятор не имеет реального GPS
Акселерометр/Гироскоп	Данные генерируются вручную	Реагирует на физическое движение	Ноутбук/ПК не оснащён этими датчиками
Компас (Магнитометр)	Значение heading задаётся вручную	Определяет направление на север	Отсутствие датчика в компьютере
Работа подтвердила, что Flutter в сочетании с мощными плагинами является эффективным инструментом для разработки приложений, активно взаимодействующих с аппаратной частью устройства. Для полноценного тестирования подобных функций необходимо использование реального устройства.

Ответы на контрольные вопросы
Какие методы используются для определения геопозиции устройства?
Комбинированный метод, использующий GPS (высокая точность на открытой местности), Wi-Fi и данные сотовых сетей (работа в помещениях, быстрее).

Что делает пакет geolocator?
Предоставляет API для запроса разрешений, получения текущих координат, высоты, скорости и направления движения, а также проверки статуса сервисов геолокации.

Какие типы сенсоров доступны?
Акселерометр, гироскоп, магнитометр (компас), датчик освещённости, барометр, шагомер.

Чем акселерометр отличается от гироскопа?
Акселерометр измеряет линейное ускорение (изменение скорости перемещения), а гироскоп — угловую скорость (скорость вращения вокруг осей).

Какие разрешения нужны для геолокации?
Для Android: ACCESS_FINE_LOCATION и/или ACCESS_COARSE_LOCATION. Для iOS: ключ NSLocationWhenInUseUsageDescription в Info.plist.

Как визуализировать положение на карте?
Используя пакеты google_maps_flutter или yandex_mapkit, создавая карту и добавляя маркер (Marker) с полученными координатами.
